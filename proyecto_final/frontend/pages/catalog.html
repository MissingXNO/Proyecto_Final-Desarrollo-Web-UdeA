<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo de Vehículos</title>
    <link href="../assets/css/styles.css" rel="stylesheet">

</head>
<body class="bg-black text-white flex flex-col">

    <!-- NavBar -->
    <div id="navbar-placeholder"></div>

    <!-- Barra de Filtros -->
    <div class="bg-gray-800 py-2 relative">
        <div class="mx-auto max-w-7xl px-4 flex space-x-4 items-center">
            <span class="text-gray-400">FILTROS:</span>
            <div class="relative">
                <button onclick="toggleMenu('transmision-menu')" class="text-white bg-gray-700 px-4 py-2 rounded hover:bg-gray-600">TRANSMISIÓN ↓</button>
                <div id="transmision-menu" class="dropdown-menu absolute bg-gray-900 text-gray-300 rounded shadow-lg mt-2 hidden">
                    <label class="block px-4 py-2">
                        <input type="checkbox" class="filter-transmision" id="manual" onclick="selectOnlyThis('manual', 'filter-transmision')"> Manual
                    </label>
                    <label class="block px-4 py-2">
                        <input type="checkbox" class="filter-transmision" id="automatico" onclick="selectOnlyThis('automatico', 'filter-transmision')"> Automático
                    </label>
                </div>
            </div>
            <div class="relative">
                <button onclick="toggleMenu('disponibilidad-menu')" class="text-white bg-gray-700 px-4 py-2 rounded hover:bg-gray-600">DISPONIBILIDAD ↓</button>
                <div id="disponibilidad-menu" class="dropdown-menu absolute bg-gray-900 text-gray-300 rounded shadow-lg mt-2 hidden">
                    <label class="block px-4 py-2">
                        <input type="checkbox" class="filter-disponibilidad" id="disponible" onclick="selectOnlyThis('disponible', 'filter-disponibilidad')"> Disponible
                    </label>
                    <label class="block px-4 py-2">
                        <input type="checkbox" class="filter-disponibilidad" id="proximamente" onclick="selectOnlyThis('proximamente', 'filter-disponibilidad')"> Próximamente
                    </label>
                </div>
            </div>
            <div class="relative">
                <button onclick="toggleMenu('fabricante-menu')" class="text-white bg-gray-700 px-4 py-2 rounded hover:bg-gray-600">FABRICANTE ↓</button>
                <div id="fabricante-menu" class="dropdown-menu absolute bg-gray-900 text-gray-300 rounded shadow-lg mt-2 hidden">
                    <label class="block px-4 py-2">
                        <input type="checkbox" class="filter-fabricante" id="ford" onclick="selectOnlyThis('ford', 'filter-fabricante')"> Ford
                    </label>
                    <label class="block px-4 py-2">
                        <input type="checkbox" class="filter-fabricante" id="toyota" onclick="selectOnlyThis('toyota', 'filter-fabricante')"> Toyota
                    </label>
                </div>
            </div>
            <div class="relative">
                <button onclick="toggleMenu('categoria-menu')" class="text-white bg-gray-700 px-4 py-2 rounded hover:bg-gray-600">CATEGORÍA ↓</button>
                <div id="categoria-menu" class="dropdown-menu absolute bg-gray-900 text-gray-300 rounded shadow-lg mt-2 hidden">
                    <label class="block px-4 py-2">
                        <input type="checkbox" class="filter-categoria" id="suv" onclick="selectOnlyThis('suv', 'filter-categoria')"> SUV
                    </label>
                    <label class="block px-4 py-2">
                        <input type="checkbox" class="filter-categoria" id="sedan" onclick="selectOnlyThis('sedan', 'filter-categoria')"> Sedan
                    </label>
                </div>
            </div>
        </div>
    </div>

    <!-- Banner Promocional -->
    <div class="bg-gradient-to-r from-cyan-500 to-indigo-700 my-4 xl:mx-80 p-1">
        <img src="../assets/images/promo.png" alt="Promoción" class="w-full h-full object-cover border-spacing-96 border-blue-500">
    </div>

    <!-- Texto de Información -->
    <div class="mx-auto max-w-7xl px-4 py-6 flex justify-between items-center">
        <p class="text-sm md:text-lg mx-14">
            Haz clic sobre el vehículo de tu preferencia para ver más detalles. <br>
            Los vehículos con fecha indicada estarán disponibles próximamente.
        </p>
        <button class="mt-2 px-6 py-2 bg-gradient-to-r from-cyan-500 to-indigo-600 text-white rounded-lg font-semibold hover:opacity-90">
            Políticas de Alquiler
        </button>
    </div>

    <!-- Mosaico de Vehículos -->
    <div class="mx-auto max-w-7xl px-4 py-6 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        <!-- Tarjetas de Vehículos -->
        <a href="vehicle.html" class="bg-gray-800 rounded-lg p-4 text-center">
            <img src="../assets/images/placeholder_car.png" alt="Vehículo 1" class="h-32 w-full object-cover rounded">
            <p class="mt-2 text-gray-300 font-semibold">Vehículo 1</p>
        </a>
        <!-- Repetir para el resto de los vehículos -->
    </div>

</body>

<div id="footer-placeholder"></div>

</html>


<script>
    // Función para manejar los submenús desplegables
    function toggleMenu(id) {
        document.querySelectorAll('.dropdown-menu').forEach(menu => {
            if (menu.id === id) {
                menu.classList.toggle('hidden');
            } else {
                menu.classList.add('hidden');
            }
        });
    }

    // Función para asegurar que solo un checkbox esté seleccionado
    function selectOnlyThis(id, group) {
        document.querySelectorAll(`.${group}`).forEach(checkbox => {
            if (checkbox.id !== id) {
                checkbox.checked = false;
            }
        });
    }
</script>

<script>
    document.addEventListener('DOMContentLoaded', async () => {
        const container = document.querySelector('.grid');
        
        try {
            // Llamar a la API de vehículos
            const response = await fetch('http://localhost:3000/api/vehicles');
            const vehicles = await response.json();

            // Generar las tarjetas de los vehículos
            container.innerHTML = vehicles.map(vehicle => `
                <a href="vehicle.html?id=${vehicle.id}" class="bg-gradient-to-r from-rose-400 to-purple-400 rounded-lg p-4 text-center">
                <img src="${vehicle.image_url}" alt="${vehicle.name}" class="h-32 w-full object-cover rounded">
                <p class="mt-2 text-white font-semibold">${vehicle.name}</p>
                </a>
            `).join('');

        } catch (error) {
            console.error('Error al cargar los vehículos:', error);
            container.innerHTML = `<p class="text-red-500">Error al cargar los vehículos. Intenta nuevamente más tarde.</p>`;
        }
    });
</script>

<script>
    // Cargar el contenido del archivo navbar.html dinámicamente
    document.addEventListener('DOMContentLoaded', async () => {
        try {
            const response = await fetch('../components/navbar.html');
            if (!response.ok) throw new Error('No se pudo cargar el navbar');
            const navbarHTML = await response.text();
            document.getElementById('navbar-placeholder').innerHTML = navbarHTML;
        } catch (error) {
            console.error('Error al cargar el navbar:', error);
        }
    });
</script>


<script>
    // Cargar el contenido del archivo footer.html dinámicamente
    document.addEventListener('DOMContentLoaded', async () => {
        try {
            const response = await fetch('../components/footer.html');  // Ruta del footer
            if (!response.ok) throw new Error('No se pudo cargar el footer.');

            const footerContent = await response.text();  // Obtener el contenido del footer
            document.getElementById('footer-placeholder').innerHTML = footerContent;  // Insertar el footer
        } catch (error) {
            console.error('Error al cargar el footer:', error);
        }
    });
</script>